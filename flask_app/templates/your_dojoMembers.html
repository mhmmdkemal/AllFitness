<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='../static/style2.css') }}" >
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <title>Your Members</title>
</head>
<body class="body">
    <div class="container-fluid background centerVertically nav">
        <div class="container-fluid background centerVertically left">
            <p><strong> Welcome, {{this_user.first_name}} ({{this_user.account_type}})</strong></p> 
            <p class="left">My Dojo Member List</p>
        </div>
        <img src="../../static/dojo.png" height="100px">
        <div class="container-fluid background centerVertically right">
            <p><a  class="btn blue_btn" href="/member/dashboard">Dashboard</a><a  class="btn red_btn" href="/logout">Logout</a></p>
            <p><a class="btn blue_btn right"  href="/member/new/member">Add a member</a></p>
        </div>
    </div>
    <div class="container">
        <h3> My Members</h3>
        {% for member in all_member%}
            {% if member.user.id == session["user_id"] %}
                <div style="background-color: {{member.plan_type}}" class="border container test_map ">
                    <div>
                        <h4 ><strong>DETAILS:</strong></h4>
                        <p><strong>Full Name => </strong>  {{member.first_name}} {{member.last_name}} </p>
                        <p><strong>Added by => </strong>  {{member.user.first_name}} {{member.user.last_name}} ({{member.user.account_type}})</p>
                        <p><strong>Location => </strong>  <a  class="upper-case"> {{member.location}}</a></p>
                        <p><strong>Age => </strong>   {{member.age}}</p>
                        <p><strong>Martial Art Type => </strong>{{member.martial_type}}</p>
                        <p><strong>Plan Type => </strong> <a  class="upper-case">{{member.plan_type}}</a></p>
                        <p><strong>Date Belt Received => </strong>{{member.date_received}}</p>
                        <a href="/member/{{member.id}}/edit">Edit</a>
                    </div>
                    <div id="googleMap" style="width:100%;height:300px;">
                    </div>
                </div>
    
                <script>
                    function myMap() {
                        var address = "{{member.location}}";

                        var mapOptions = {
                            //center: new google.maps.LatLng(51.508742, -0.120850),
                            zoom: 7,
                            panControl: true,
                            zoomControl: false,
                            mapTypeControl: false,
                            scaleControl: false,
                            streetViewControl: false,
                            overviewMapControl: true,
                            rotateControl: false
                        };
                        var map = new google.maps.Map(document.getElementById("googleMap"), mapOptions);
                        var geocoder = new google.maps.Geocoder();

                        geocoder.geocode({
                            'address': address
                        },
                        function (results, status) {
                            if (status == google.maps.GeocoderStatus.OK) {
                                new google.maps.Marker({
                                    position: results[0].geometry.location,
                                    map: map
                                });
                                map.setCenter(results[0].geometry.location);
                            }
                        });
                    }
                    myMap();
                </script>
                <script src="https://maps.googleapis.com/maps/api/js?key=YOURKEY=myMap"></script>
                {% endif %}
        {% endfor %}
    </div>

</body>
</html>

